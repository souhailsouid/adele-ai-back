### REST Client pour VS Code
### Extension: REST Client (humao.rest-client)
### 
### Variables d'environnement (√† d√©finir dans VS Code settings ou dans ce fichier)
### 
### IMPORTANT : Apr√®s le d√©ploiement de la s√©paration des API Gateways, il y a maintenant 2 URLs :
### - @baseUrlMain : API Gateway 1 (routes de l'application principale)
### - @baseUrlData : API Gateway 2 (routes de donn√©es brutes FMP + UW)
### 
### Pour obtenir les URLs apr√®s terraform apply :
###   terraform output api_gateway_url        # API Gateway 1
###   terraform output api_data_gateway_url  # API Gateway 2

### API Gateway 1 : Application Principale (signals, funds, companies, analysis, scoring, etc.)
@baseUrlMain = https://tsdd1sibd1.execute-api.eu-west-3.amazonaws.com/prod

### API Gateway 2 : Donn√©es Brutes (FMP + Unusual Whales)
### ‚ö†Ô∏è √Ä mettre √† jour apr√®s terraform apply avec : terraform output api_data_gateway_url
@baseUrlData = https://faq9dl95v7.execute-api.eu-west-3.amazonaws.com/prod

### Token d'acc√®s (√† mettre √† jour r√©guli√®rement)
@accessToken = eyJraWQiOiIwekpSMTVhYjBqSk0xdnJmaFBSa0NveGJBaHhnXC9HblhkeU56Y09iRkRyND0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiI1MTI5ODBiZS0wMGQxLTcwZmYtNTQ3Zi0zYTA3YzkyMzA3ODIiLCJpc3MiOiJodHRwczpcL1wvY29nbml0by1pZHAuZXUtd2VzdC0zLmFtYXpvbmF3cy5jb21cL2V1LXdlc3QtM19GUURtaHhWMTQiLCJjbGllbnRfaWQiOiJwa3A0aTgyam50dHRoajJjYmlsdHVkZ3ZhIiwib3JpZ2luX2p0aSI6IjdjMmMzMjA3LTFiM2MtNGMxZS1iNzIyLTA3MjIzY2U2NzNkMCIsImV2ZW50X2lkIjoiYWYxZDQwOTEtZWUyMy00NzM4LThiNTMtMDYzMjcyYTA2YTZiIiwidG9rZW5fdXNlIjoiYWNjZXNzIiwic2NvcGUiOiJhd3MuY29nbml0by5zaWduaW4udXNlci5hZG1pbiIsImF1dGhfdGltZSI6MTc2NTI5NTMyMywiZXhwIjoxNzY1Mjk4OTIzLCJpYXQiOjE3NjUyOTUzMjMsImp0aSI6IjhmZTliNGZhLTcyM2UtNGNlZS1iM2Q3LTg1Y2VlN2E5MWJiMCIsInVzZXJuYW1lIjoiNTEyOTgwYmUtMDBkMS03MGZmLTU0N2YtM2EwN2M5MjMwNzgyIn0.ZijZQQRyvMHFlRHsTl-AZe3grgsv7-_Xhl9r3SAyBqbEFhw5SfFkp5Ca8fZQwjAVqpkFK0wpYIt_oEUmjSnEOKBn_MNmg6zB8POcS5xEOB0opX3tKOdX2IWQX_WJ8HNay8MVXQXixjuczMdy5ZvDVl3Sio3lXph0eSbArEvWx9vjLvr-EGu3bEj9lPMD6zMX-XGNyjcaCB-FBt5nDxCjqtDzZwq1mWlFdaEznU719jA16JgAKmxuPv4HyKcaZMzu4Ss_hPLOCZXw4yW6-pFkFx0-Y2PBsCtIm_a1raUvH2XD4EY7HLoGyQ2X5iVOPw0dE_dBuccRdYegHc_IVIbqPA

@watchId = ff9dcbd4-1e0a-4e48-8604-854cdb5ac407"
### ============================================
### ANALYSE COMBIN√âE (FMP + UW)
### ============================================

### Complete Analysis - Analyse compl√®te (fundamentals + sentiment)
### ‚úÖ API Gateway 1 (Application Principale)
GET {{baseUrlMain}}/analysis/AAPL/complete
Authorization: Bearer {{accessToken}}

### Complete Analysis - TSLA
GET {{baseUrlMain}}/analysis/TSLA/complete
Authorization: Bearer {{accessToken}}

### Complete Analysis - NVDA
GET {{baseUrlMain}}/analysis/NVDA/complete
Authorization: Bearer {{accessToken}}

### Divergence Analysis - D√©tecte les divergences fundamentals vs sentiment
GET {{baseUrlMain}}/analysis/AAPL/divergence
Authorization: Bearer {{accessToken}}

### Divergence Analysis - NVDA
GET {{baseUrlMain}}/analysis/NVDA/divergence
Authorization: Bearer {{accessToken}}

### Comprehensive Valuation - Valuation compl√®te (DCF + Sentiment Multiplier)
GET {{baseUrlMain}}/analysis/AAPL/valuation
Authorization: Bearer {{accessToken}}

### Comprehensive Valuation - MSFT
GET {{baseUrlMain}}/analysis/MSFT/valuation
Authorization: Bearer {{accessToken}}

### Earnings Prediction - Pr√©diction de surprise d'earnings
GET {{baseUrlMain}}/analysis/AAPL/earnings-prediction
Authorization: Bearer {{accessToken}}

### Earnings Prediction - Avec date sp√©cifique
GET {{baseUrlMain}}/analysis/AAPL/earnings-prediction?earningsDate=2025-01-30
Authorization: Bearer {{accessToken}}

### Earnings Prediction - TSLA
GET {{baseUrlMain}}/analysis/TSLA/earnings-prediction
Authorization: Bearer {{accessToken}}

### Risk Analysis - Analyse de risque (financier + march√©)
GET {{baseUrlMain}}/analysis/AAPL/risk
Authorization: Bearer {{accessToken}}

### Risk Analysis - TSLA
GET {{baseUrlMain}}/analysis/TSLA/risk
Authorization: Bearer {{accessToken}}

### Risk Analysis - NVDA
GET {{baseUrlMain}}/analysis/NVDA/risk
Authorization: Bearer {{accessToken}}

### ============================================
### SCREENER MULTI-CRIT√àRES
### ============================================

### Multi-Criteria Screener - Screening avec crit√®res FMP + UW
### ‚úÖ API Gateway 1 (Application Principale)
POST {{baseUrlMain}}/screener/multi-criteria
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "minMarketCap": 1000000000,
  "maxPERatio": 30,
  "minRevenueGrowth": 5,
  "limit": 10
}

### Multi-Criteria Screener - Technology sector
POST {{baseUrlMain}}/screener/multi-criteria
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "sector": "Technology",
  "minMarketCap": 10000000000,
  "maxPERatio": 25,
  "limit": 5
}

### ============================================
### INSTITUTION TRACKING
### ============================================

### Institution Tracking - Berkshire Hathaway
### ‚úÖ API Gateway 1 (Application Principale)
GET {{baseUrlMain}}/institutions/Berkshire%20Hathaway/tracking
Authorization: Bearer {{accessToken}}

### Institution Tracking - BlackRock
GET {{baseUrlMain}}/institutions/BlackRock/tracking
Authorization: Bearer {{accessToken}}

### Institution Tracking - Vanguard
GET {{baseUrlMain}}/institutions/Vanguard/tracking
Authorization: Bearer {{accessToken}}

### ============================================
### SECTOR ANALYSIS
### ============================================

### Sector Analysis - Technology
### ‚úÖ API Gateway 1 (Application Principale)
GET {{baseUrlMain}}/analysis/sector/Technology
Authorization: Bearer {{accessToken}}

### Sector Analysis - Healthcare
GET {{baseUrlMain}}/analysis/sector/Healthcare
Authorization: Bearer {{accessToken}}

### Sector Analysis - Financial
GET {{baseUrlMain}}/analysis/sector/Financial
Authorization: Bearer {{accessToken}}

### ============================================
### UNUSUAL WHALES - Endpoints de donn√©es brutes
### ============================================
### ‚ö†Ô∏è API Gateway 2 (Donn√©es Brutes) - Mettre √† jour @baseUrlData apr√®s terraform apply

### Recent Flows - Flow d'options r√©cent
GET {{baseUrlData}}/unusual-whales/stock/AAPL/flow-recent?limit=10
Authorization: Bearer {{accessToken}}

### Recent Flows - TSLA
GET {{baseUrlData}}/unusual-whales/stock/TSLA/flow-recent?limit=10&min_premium=50000
Authorization: Bearer {{accessToken}}

### Institution Ownership - Propri√©t√© institutionnelle
GET {{baseUrlData}}/unusual-whales/institution/AAPL/ownership
Authorization: Bearer {{accessToken}}

### Short Interest and Float - Int√©r√™t √† d√©couvert
GET {{baseUrlData}}/unusual-whales/shorts/AAPL/interest-float
Authorization: Bearer {{accessToken}}

### Dark Pool Trades - Transactions dark pool
GET {{baseUrlData}}/unusual-whales/dark-pool/AAPL?limit=50
Authorization: Bearer {{accessToken}}

### Insider Buy/Sells - Transactions d'insiders
GET {{baseUrlData}}/unusual-whales/stock/AAPL/insider-buy-sells
Authorization: Bearer {{accessToken}}

### Institution Activity - Activit√© institutionnelle
GET {{baseUrlData}}/unusual-whales/institution/AAPL/activity?limit=100
Authorization: Bearer {{accessToken}}

### ============================================
### FMP - Endpoints de donn√©es brutes
### ============================================
### ‚ö†Ô∏è API Gateway 2 (Donn√©es Brutes) - Mettre √† jour @baseUrlData apr√®s terraform apply

### Stock Quote - Cotation
GET {{baseUrlData}}/fmp/quote/AAPL
Authorization: Bearer {{accessToken}}

### Income Statement - √âtat des r√©sultats
GET {{baseUrlData}}/fmp/income-statement/AAPL?limit=5&period=annual
Authorization: Bearer {{accessToken}}

### Financial Ratios - Ratios financiers
GET {{baseUrlData}}/fmp/financial-ratios/AAPL?limit=5
Authorization: Bearer {{accessToken}}

### Key Metrics - M√©triques cl√©s
GET {{baseUrlData}}/fmp/key-metrics/AAPL?limit=5
Authorization: Bearer {{accessToken}}

### Balance Sheet - Bilan
GET {{baseUrlData}}/fmp/balance-sheet-statement/AAPL?limit=1
Authorization: Bearer {{accessToken}}

### Cash Flow Statement - √âtat des flux de tr√©sorerie
GET {{baseUrlData}}/fmp/cash-flow-statement/AAPL?limit=1
Authorization: Bearer {{accessToken}}

### DCF Valuation - Valorisation DCF
GET {{baseUrlData}}/fmp/dcf-valuation/AAPL
Authorization: Bearer {{accessToken}}

### Levered DCF - DCF avec effet de levier
GET {{baseUrlData}}/fmp/levered-dcf/AAPL
Authorization: Bearer {{accessToken}}

### Earnings Report - Rapport de r√©sultats
GET {{baseUrlData}}/fmp/earnings/AAPL
Authorization: Bearer {{accessToken}}

### Financial Estimates - Estimations financi√®res
GET {{baseUrlData}}/fmp/financial-estimates/AAPL?period=quarter
Authorization: Bearer {{accessToken}}

### Ratings Snapshot - Aper√ßu des notations
GET {{baseUrlData}}/fmp/ratings-snapshot/AAPL
Authorization: Bearer {{accessToken}}

### ============================================
### TICKER ACTIVITY (Legacy)
### ============================================
### ‚úÖ API Gateway 1 (Application Principale)

### Ticker Quote - Cotation
GET {{baseUrlMain}}/ticker-activity/AAPL/quote
Authorization: Bearer {{accessToken}}

### Ticker Activity - Activit√©
GET {{baseUrlMain}}/ticker-activity/AAPL/activity
Authorization: Bearer {{accessToken}}

### Ticker Options - Options
GET {{baseUrlMain}}/ticker-activity/AAPL/options?limit=10
Authorization: Bearer {{accessToken}}
### Ticker Options - Options
GET {{baseUrlMain}}/ticker-activity/NVDA/options?limit=10
Authorization: Bearer {{accessToken}}
### Ticker Dark Pool - Dark pool
GET {{baseUrlMain}}/ticker-activity/AAPL/dark-pool?limit=10
Authorization: Bearer {{accessToken}}

### Ticker Insights - Insights complets
GET {{baseUrlMain}}/ticker-insights/AAPL
Authorization: Bearer {{accessToken}}

### ============================================
### TESTS DE VALIDATION DES DONN√âES
### ============================================

### Test 1: V√©rifier que Recent Flows retourne des donn√©es (API Gateway 2)
GET {{baseUrlData}}/unusual-whales/stock/AAPL/flow-recent?limit=10
Authorization: Bearer {{accessToken}}

### Test 2: V√©rifier que Institution Ownership retourne des donn√©es (API Gateway 2)
GET {{baseUrlData}}/unusual-whales/institution/AAPL/ownership
Authorization: Bearer {{accessToken}}

### Test 3: V√©rifier que Short Interest retourne des donn√©es (API Gateway 2)
GET {{baseUrlData}}/unusual-whales/shorts/AAPL/interest-float
Authorization: Bearer {{accessToken}}

### Test 4: V√©rifier que Dark Pool retourne des donn√©es (API Gateway 2)
GET {{baseUrlData}}/unusual-whales/dark-pool/AAPL?limit=10
Authorization: Bearer {{accessToken}}

### Test 5: V√©rifier que Complete Analysis utilise les donn√©es UW (API Gateway 1)
GET {{baseUrlMain}}/analysis/AAPL/complete
Authorization: Bearer {{accessToken}}

### Test 6: V√©rifier que Valuation a un prix actuel valide (API Gateway 1)
GET {{baseUrlMain}}/analysis/AAPL/valuation
Authorization: Bearer {{accessToken}}

### Test 7: V√©rifier que Earnings Prediction a des signaux valides (API Gateway 1)
GET {{baseUrlMain}}/analysis/AAPL/earnings-prediction
Authorization: Bearer {{accessToken}}

### Test 8: V√©rifier que Score retourne des donn√©es (API Gateway 1)
GET {{baseUrlMain}}/ticker-analysis/AAPL/score 
Authorization: Bearer {{accessToken}}

### Test 9: V√©rifier que Breakdown retourne des donn√©es (API Gateway 1)
GET {{baseUrlMain}}/ticker-analysis/AAPL/breakdown
Authorization: Bearer {{accessToken}}

### Test 10: V√©rifier que Institution Tracking retourne des donn√©es (API Gateway 1)
GET {{baseUrlMain}}/institutions/Berkshire%20Hathaway/tracking
Authorization: Bearer {{accessToken}}

### Test 11: V√©rifier que Gamma Squeeze retourne des donn√©es (API Gateway 1)
GET {{baseUrlMain}}/ticker-analysis/TSLA/gamma-squeeze
Authorization: Bearer {{accessToken}}

### ============================================
### SURVEILLANCE - Phase 2
### ============================================
### ‚úÖ API Gateway 1 (Application Principale)

### Cr√©er une surveillance pour un ticker
POST {{baseUrlMain}}/surveillance/watch
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "AAPL",
  "minPremium": 50000,
  "callVolumeThreshold": 1000000,
  "putVolumeThreshold": 500000,
  "darkPoolVolumeThreshold": 5000000,
  "shortInterestThreshold": 20,
  "insiderChangeThreshold": 10,
  "checkInterval": 5,
  "notificationChannels": ["webhook", "email"],
  "active": true
}

### Cr√©er une surveillance pour TSLA
POST {{baseUrlMain}}/surveillance/watch
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "TSLA",
  "minPremium": 100000,
  "callVolumeThreshold": 2000000,
  "shortInterestThreshold": 15,
  "checkInterval": 5,
  "notificationChannels": ["webhook"]
}

### Liste des surveillances de l'utilisateur
GET {{baseUrlMain}}/surveillance/watches
Authorization: Bearer {{accessToken}}

### R√©cup√©rer les alertes d'une surveillance (remplacer {id} par un watchId r√©el)
GET {{baseUrlMain}}/surveillance/watch/b3723b7c-215d-49cf-ad63-0e160d5b80b5/alerts
Authorization: Bearer {{accessToken}}

### D√©clencher manuellement la v√©rification d'une surveillance (pour g√©n√©rer des alertes)
POST {{baseUrlMain}}/surveillance/watch/b3723b7c-215d-49cf-ad63-0e160d5b80b5/check
Authorization: Bearer {{accessToken}}

### Supprimer une surveillance (remplacer {id} par un watchId r√©el)
DELETE {{baseUrlMain}}/surveillance/watch/89acab7a-109f-4ff5-8cc4-e5e6ddacb820
Authorization: Bearer {{accessToken}}

### ============================================
### ALERTES MULTI-SIGNAUX - Phase 2
### ============================================
### ‚úÖ API Gateway 1 (Application Principale)

### Cr√©er une alerte multi-signaux (AND)
POST {{baseUrlMain}}/alerts
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "AAPL",
  "name": "Alerte Options Flow + Insiders",
  "description": "D√©clenche si options flow √©lev√© ET insiders ach√®tent",
  "conditions": [
    {
      "signal": "options_flow",
      "operator": "gt",
      "value": 1000000,
      "params": {
        "type": "call"
      }
    },
    {
      "signal": "insider_activity",
      "operator": "gt",
      "value": 2
    }
  ],
  "logic": "AND",
  "notificationChannels": ["webhook", "email"],
  "active": true
}

### Cr√©er une alerte multi-signaux (OR)
POST {{baseUrlMain}}/alerts
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "TSLA",
  "name": "Alerte Dark Pool OU Short Interest",
  "description": "D√©clenche si dark pool √©lev√© OU short interest √©lev√©",
  "conditions": [
    {
      "signal": "dark_pool",
      "operator": "gt",
      "value": 5000000
    },
    {
      "signal": "short_interest",
      "operator": "gt",
      "value": 20
    }
  ],
  "logic": "OR",
  "notificationChannels": ["webhook"],
  "active": true
}

### Liste des alertes de l'utilisateur
GET {{baseUrlMain}}/alerts
Authorization: Bearer {{accessToken}}

### R√©cup√©rer une alerte par ID (remplacer {id} par un alertId r√©el)
GET {{baseUrlMain}}/alerts/{id}
Authorization: Bearer {{accessToken}}

### Mettre √† jour une alerte (remplacer {id} par un alertId r√©el)
PUT {{baseUrlMain}}/alerts/{id}
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "name": "Alerte mise √† jour",
  "active": false
}

### Tester une alerte (v√©rifier si elle se d√©clencherait maintenant)
POST {{baseUrlMain}}/alerts/{id}/test
Authorization: Bearer {{accessToken}}

### Supprimer une alerte (remplacer {id} par un alertId r√©el)
DELETE {{baseUrlMain}}/alerts/{id}
Authorization: Bearer {{accessToken}}

### ============================================
### SMART MONEY - Phase 3 (Compl√©t√©)
### ============================================
### ‚úÖ API Gateway 1 (Application Principale)

### Top Hedge Funds par performance (d√©faut: 3 mois)
GET {{baseUrlMain}}/smart-money/top-hedge-funds
Authorization: Bearer {{accessToken}}

### Top Hedge Funds - P√©riode 1 mois
GET {{baseUrlMain}}/smart-money/top-hedge-funds?period=1M
Authorization: Bearer {{accessToken}}

### Top Hedge Funds - P√©riode 3 mois
GET {{baseUrlMain}}/smart-money/top-hedge-funds?period=3M
Authorization: Bearer {{accessToken}}

### Top Hedge Funds - P√©riode 6 mois
GET {{baseUrlMain}}/smart-money/top-hedge-funds?period=6M
Authorization: Bearer {{accessToken}}

### Top Hedge Funds - P√©riode 1 an
GET {{baseUrlMain}}/smart-money/top-hedge-funds?period=1Y
Authorization: Bearer {{accessToken}}

### Copy Trades - Berkshire Hathaway pour AAPL (par nom - peut ne pas fonctionner)
GET {{baseUrlMain}}/smart-money/institution/Berkshire%20Hathaway/copy-trades/AAPL
Authorization: Bearer {{accessToken}}

### Copy Trades - Berkshire Hathaway pour TSLA (par CIK - fonctionne)
### CIK: 0001697748 (Berkshire Hathaway)
GET {{baseUrlMain}}/smart-money/institution/0001697748/copy-trades/TSLA
Authorization: Bearer {{accessToken}}

### Copy Trades - BlackRock pour TSLA (par CIK)
### CIK: 0001364742 (BlackRock)
GET {{baseUrlMain}}/smart-money/institution/0001364742/copy-trades/TSLA
Authorization: Bearer {{accessToken}}

### Copy Trades - Vanguard pour MSFT
GET {{baseUrlMain}}/smart-money/institution/Vanguard/copy-trades/MSFT
Authorization: Bearer {{accessToken}}

### Copy Trades - Fidelity pour NVDA
GET {{baseUrlMain}}/smart-money/institution/Fidelity/copy-trades/NVDA
Authorization: Bearer {{accessToken}}

### ============================================
### MARKET ANALYSIS - Phase 4 (Compl√©t√©)
### ============================================
### ‚úÖ API Gateway 1 (Application Principale)

### Sector Rotation - D√©tection des rotations sectorielles
GET {{baseUrlMain}}/market-analysis/sector-rotation
Authorization: Bearer {{accessToken}}

### Market Tide - Sentiment global du march√©
GET {{baseUrlMain}}/market-analysis/market-tide
Authorization: Bearer {{accessToken}}

### ============================================
### TESTS COMPL√âMENTAIRES - Services compl√©t√©s
### ============================================

### Test 12: V√©rifier que Top Hedge Funds retourne des donn√©es
GET {{baseUrlMain}}/smart-money/top-hedge-funds
Authorization: Bearer {{accessToken}}

### Test 13: V√©rifier que Copy Trades retourne des donn√©es (par CIK)
GET {{baseUrlMain}}/smart-money/institution/0001649339/copy-trades/TSLA
Authorization: Bearer {{accessToken}}

### Test 14: V√©rifier que Sector Rotation retourne des donn√©es
GET {{baseUrlMain}}/market-analysis/sector-rotation
Authorization: Bearer {{accessToken}}

### Test 15: V√©rifier que Market Tide retourne des donn√©es
GET {{baseUrlMain}}/market-analysis/market-tide
Authorization: Bearer {{accessToken}}

### TEST 16: CALENDAR

GET https://tsdd1sibd1.execute-api.eu-west-3.amazonaws.com/prod/economic-calendar?from=2025-12-07&to=2026-01-06
Authorization: Bearer {{accessToken}}

### Test 17: V√©rifier que 13F Filings retourne des donn√©es
GET {{baseUrlMain}}/13f-filings/latest
Authorization: Bearer {{accessToken}}

### Test 17b: 13F Filings avec p√©riode sp√©cifique
GET {{baseUrlMain}}/13f-filings/latest?from=2025-09-07&to=2025-12-07&limit=50
Authorization: Bearer {{accessToken}}

### Test 18: V√©rifier que 13F Filings retourne des donn√©es avec des param√®tres

POST {{baseUrlMain}}/attribution/flow
Authorization: Bearer {{accessToken}}

### Test 19: V√©rifier que Attribution Institution retourne des donn√©es
GET {{baseUrlMain}}/attribution/institution/{institutionId}/ticker/{ticker} ‚Äî Attribuer l'influence d'une institution
Authorization: Bearer {{accessToken}}


### Test 20: V√©rifier que Attribution Dominant Entities retourne des donn√©es
GET {{baseUrlMain}}/attribution/dominant-entities/{ticker} ‚Äî Trouver les entit√©s dominantes
Authorization: Bearer {{accessToken}}

### Test 20: V√©rifier que Attribution Clusters retourne des donn√©es
GET {{baseUrlMain}}/attribution/clusters 
Authorization: Bearer {{accessToken}}

### Test 21: Attribution Clusters avec secteur sp√©cifique
GET {{baseUrlMain}}/attribution/clusters?sector=Technology
Authorization: Bearer {{accessToken}}

### ============================================
### 13F FILINGS - Transactions et Holdings
### ============================================
### ‚ö†Ô∏è API Gateway 2 (Donn√©es Brutes) - Mettre √† jour @baseUrlData apr√®s terraform apply

### Holdings d'une Institution (BlackRock) - Visualiser les transactions
### CIK: 0001364742 (BlackRock)
GET {{baseUrlData}}/unusual-whales/institution/0001364742/holdings?date=2025-09-30&limit=100&order=value&order_direction=desc
Authorization: Bearer {{accessToken}}

### Holdings d'une Institution (Vanguard) - Visualiser les transactions
### CIK: 0000102909 (Vanguard)
GET {{baseUrlData}}/unusual-whales/institution/0000102909/holdings?date=2025-09-30&limit=100&order=units_change&order_direction=desc
Authorization: Bearer {{accessToken}}

### Holdings d'une Institution avec p√©riode (comparaison)
### Permet de comparer les positions entre deux dates
GET {{baseUrlData}}/unusual-whales/institution/0001364742/holdings?start_date=2025-06-30&end_date=2025-09-30&limit=100&order=units_change&order_direction=desc
Authorization: Bearer {{accessToken}}

### Activit√© de Trading d'une Institution (BlackRock)
### Retourne les activit√©s r√©centes avec buy_price, sell_price
GET {{baseUrlData}}/unusual-whales/institution/0001364742/activity?limit=100&date=2025-09-30
Authorization: Bearer {{accessToken}}

### Activit√© de Trading d'une Institution (Berkshire Hathaway)
### CIK: 0001697748 (Berkshire Hathaway)
GET {{baseUrlData}}/unusual-whales/institution/0001697748/activity?limit=100&date=2025-09-30
Authorization: Bearer {{accessToken}}

### ============================================
### HEATMAP OPTIONS - Strike √ó Expiration
### ============================================

### Options Flow (50 flows r√©cents pour heatmap)
### √Ä agr√©ger c√¥t√© frontend par strike et expiry
GET {{baseUrlMain}}/ticker-activity/AAPL/options?limit=50&min_premium=10000
Authorization: Bearer {{accessToken}}

### Options Flow (NVDA - 50 flows pour heatmap)
GET {{baseUrlMain}}/ticker-activity/NVDA/options?limit=50&min_premium=50000
Authorization: Bearer {{accessToken}}

### Flow par Strike (agr√©g√© - 1D heatmap)
GET {{baseUrlData}}/unusual-whales/stock/AAPL/flow-per-strike?date=2025-12-07
Authorization: Bearer {{accessToken}}

### Flow par Expiry (agr√©g√© - 1D heatmap)
GET {{baseUrlData}}/unusual-whales/stock/AAPL/flow-per-expiry
Authorization: Bearer {{accessToken}}

### Flow per Strike Intraday (avec filtre)
GET {{baseUrlData}}/unusual-whales/stock/AAPL/flow-per-strike-intraday?date=2025-12-07&filter=NetPremium
Authorization: Bearer {{accessToken}}

### ============================================
### ATTRIBUTION ENGINE - Fonctionnalit√©s Avanc√©es Arkham-Level
### ============================================
### ‚úÖ API Gateway 1 (Application Principale)

### Test Flow Signature Matching (int√©gr√© dans /attribution/flow)
### Ce flow devrait maintenant matcher avec les patterns historiques de JPMorgan
POST {{baseUrlMain}}/attribution/flow
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "NVDA",
  "flowType": "CALL",
  "premium": 2000000,
  "strike": 550,
  "expiry": "2026-01-15",
  "timestamp": "2025-12-07T10:00:00Z"
}

### Test Flow Signature Matching - PUT flow
POST {{baseUrlMain}}/attribution/flow
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "TSLA",
  "flowType": "PUT",
  "premium": 1500000,
  "strike": 250,
  "expiry": "2026-02-20",
  "timestamp": "2025-12-07T10:00:00Z"
}

### Test Insider Registry (int√©gr√© dans /attribution/flow)
### Les insiders devraient maintenant √™tre enrichis avec leur r√¥le (CEO, CFO, etc.)
POST {{baseUrlMain}}/attribution/flow
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "AAPL",
  "flowType": "CALL",
  "premium": 1000000,
  "strike": 200,
  "expiry": "2026-01-20",
  "timestamp": "2025-12-07T10:00:00Z"
}

### Test Centralit√© Avanc√©e (int√©gr√© dans /attribution/institution)
### Les m√©triques devraient maintenant inclure PageRank, Betweenness, etc.
GET {{baseUrlMain}}/attribution/institution/0001364742/ticker/NVDA?period=3M
Authorization: Bearer {{accessToken}}

### Test Centralit√© Avanc√©e - BlackRock pour AAPL
GET {{baseUrlMain}}/attribution/institution/0001364742/ticker/AAPL?period=3M
Authorization: Bearer {{accessToken}}

### Test Dominant Entities avec nouvelles fonctionnalit√©s
### Devrait maintenant inclure : flotShare, positionDelta, accumulationTempo, graphCentrality
GET {{baseUrlMain}}/attribution/dominant-entities/NVDA
Authorization: Bearer {{accessToken}}

### Test Dominant Entities - TSLA
GET {{baseUrlMain}}/attribution/dominant-entities/TSLA
Authorization: Bearer {{accessToken}}

### Test Dominant Entities - AAPL
GET {{baseUrlMain}}/attribution/dominant-entities/AAPL
Authorization: Bearer {{accessToken}}

### Test Conflict Engine (int√©gr√© dans /attribution/flow)
### Devrait d√©tecter les entit√©s oppos√©es (short interest, PUT flows, dark pool bearish)
POST {{baseUrlMain}}/attribution/flow
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "NVDA",
  "flowType": "CALL",
  "premium": 3000000,
  "strike": 500,
  "expiry": "2026-01-15",
  "timestamp": "2025-12-07T10:00:00Z"
}

### Test Sector Clustering (via /attribution/clusters)
### Devrait d√©tecter les clusters d'institutions par secteur
GET {{baseUrlMain}}/attribution/clusters?sector=Technology
Authorization: Bearer {{accessToken}}

### Test Sector Clustering - Healthcare
GET {{baseUrlMain}}/attribution/clusters?sector=Healthcare
Authorization: Bearer {{accessToken}}

### Test Sector Clustering - Tous secteurs
GET {{baseUrlMain}}/attribution/clusters
Authorization: Bearer {{accessToken}}

### test 2
GET {{baseUrlData}}/unusual-whales/institution/0001103887/holdings
Authorization: Bearer {{accessToken}}
##
### ============================================
### NOTES
### ============================================
###
### üîÄ S√âPARATION DES API GATEWAYS
### Apr√®s le d√©ploiement, il y a maintenant 2 API Gateways :
### 
### 1. API Gateway 1 (@baseUrlMain) : Routes de l'application principale
###    - /signals, /funds, /companies
###    - /ticker-activity/*, /ticker-insights/*
###    - /analysis/*, /screener/*, /institutions/*
###    - /ticker-analysis/* (score, breakdown, gamma-squeeze)
###    - /surveillance/* (surveillance continue)
###    - /alerts/* (alertes multi-signaux)
###    - /smart-money/* (top hedge funds, copy trades)
###    - /market-analysis/* (sector rotation, market tide)
###
### 2. API Gateway 2 (@baseUrlData) : Routes de donn√©es brutes
###    - /fmp/* (toutes les routes FMP)
###    - /unusual-whales/* (toutes les routes UW)
###
### üìù INSTRUCTIONS
###
### 1. Apr√®s terraform apply, r√©cup√©rez les URLs :
###    cd infra/terraform
###    terraform output api_gateway_url        # ‚Üí Mettre dans @baseUrlMain
###    terraform output api_data_gateway_url  # ‚Üí Mettre dans @baseUrlData
###
### 2. Remplacez {{accessToken}} par votre token d'acc√®s valide
### 3. Le token expire apr√®s un certain temps, r√©g√©n√©rez-le si n√©cessaire
###
### 4. Pour utiliser des variables d'environnement dans VS Code:
###    - Ouvrez les settings (Cmd/Ctrl + ,)
###    - Cherchez "rest-client.environmentVariables"
###    - Ajoutez vos variables
###
### 5. Pour tester un endpoint:
###    - Cliquez sur "Send Request" au-dessus de la requ√™te
###    - Ou utilisez Cmd/Ctrl + Alt + R
###
### 6. Les r√©ponses s'affichent dans un onglet √† droite
###
### 7. Valeurs suspectes √† surveiller:
###    - sentiment.score = 50 (valeur par d√©faut)
###    - callVolume = 0 et putVolume = 0 (pas de donn√©es options)
###    - currentPrice = 0 (prix non extrait)
###    - totalHoldings = 0 (pas de holdings)
###    - averagePE = 0 (PE non calcul√©)
###
### ============================================
### ATTRIBUTION ENGINE
### ============================================

### Test connexion Neo4j
GET {{baseUrlMain}}/graph/test-connection
Authorization: Bearer {{accessToken}}

### 
GET {{baseUrlData}}/unusual-whales/institution/0001103887/holdings?date=2025-12-05&limit=100&order=value&order_direction=desc
Authorization: Bearer {{accessToken}}
###

### Attribuer un flow options √† des entit√©s
POST {{baseUrlMain}}/attribution/flow
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "NVDA",
  "flowType": "CALL",
  "premium": 2000000,
  "strike": 500,
  "expiry": "2026-01-15",
  "timestamp": "2025-12-07T10:00:00Z"
}

###

### Attribuer l'influence d'une institution sur un ticker
GET {{baseUrlMain}}/attribution/institution/0001364742/ticker/NVDA?period=3M
Authorization: Bearer {{accessToken}}

###
### UW ECONOMIC-CALENDAR 
GET {{baseUrlData}}/unusual-whales/market/economic-calendar?limit=500
Authorization: Bearer {{accessToken}}

### Analyse IA du calendrier √©conomique Unusual Whales
POST {{baseUrlMain}}/ai/economic-calendar-analysis?limit=500
Authorization: Bearer {{accessToken}}
Content-Type: application/json

### Trouver les entit√©s dominantes pour un ticker
GET {{baseUrlMain}}/attribution/dominant-entities/NVDA
Authorization: Bearer {{accessToken}}

###

### Clustering institutionnel
GET {{baseUrlMain}}/attribution/clusters?sector=Technology
Authorization: Bearer {{accessToken}}

###
### üîç IDENTIFICATION RAPIDE
### - Si la route commence par /fmp/ ou /unusual-whales/ ‚Üí @baseUrlData
### - Sinon ‚Üí @baseUrlMain
###
### üìù INSTITUTIONS (Smart Money / Copy Trades)
### L'API Unusual Whales accepte √† la fois les noms d'institutions et les CIK.
### Pour certaines institutions, le CIK est plus fiable que le nom.
### 
### Exemples de CIK :
### - Berkshire Hathaway: 0001697748
### - BlackRock: 0001364742
### - Vanguard: 0000102909
###
### Si une requ√™te avec un nom d'institution retourne une erreur 500,
### essayez d'utiliser le CIK √† la place.
###

### ============================================
### ü§ñ ANALYSE IA (AI Analyst)
### ============================================

### Analyser un calendrier d'√©v√©nements (FDA, Earnings, etc.)
### 100% DYNAMIQUE : Le backend r√©cup√®re automatiquement toutes les donn√©es depuis les APIs
### APIs invoqu√©es : Economic Calendar, FDA Calendar, Earnings Calendar
### P√©riode par d√©faut : 21 jours (si from/to non fournis)
POST {{baseUrlMain}}/ai/calendar-summary
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "from": "2025-12-09",
  "to": "2025-12-30"
}



###
### Analyser un flux d'options inhabituel (ENRICHI)
### 100% DYNAMIQUE : N√©cessite seulement { ticker }
### ‚ú® NOUVELLES FONCTIONNALIT√âS :
### - Open Interest changes (calls, puts, max OI strikes)
### - Implied Volatility (current, percentile, skew)
### - Volume Profile (par strike et par expiry)
### - Unusual Activity (sweeps, blocks, largest sweep)
### - Max Pain analysis (price distance)
### - Price Action (support/resistance, trend)
### - Upcoming Events (earnings, FDA)
### - Sc√©narios multiples (bullish/bearish/neutral) avec probabilit√©s
### - Recommandations avec strikes/expiries et risk level
### - Warnings (IV crush, max pain risk)
POST {{baseUrlMain}}/ai/options-flow-analysis
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "NVDA"
}

###
### Test Options Flow avec ticker diff√©rent
POST {{baseUrlMain}}/ai/options-flow-analysis
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "TSLA"
}

###
### Analyser les mouvements d'une institution (ENRICHI)
### 100% DYNAMIQUE : Le backend r√©cup√®re automatiquement toutes les donn√©es depuis les APIs
### ‚ú® NOUVELLES FONCTIONNALIT√âS :
### - Historique des positions (4 trimestres)
### - Performance des positions (P&L, entry price, holding period)
### - Concentration du portefeuille (top 10)
### - Sector Rotation detection
### - Style Analysis (growth/value/momentum/blend)
### - Market Context (SPY performance, sector performance)
### - Strategy Insight avec confidence
### - Performance Attribution (top performers, underperformers)
### - Copy Trade Opportunities avec entry strategies
### - Portfolio Analysis (concentration risk, sector bets)
POST {{baseUrlMain}}/ai/institution-moves-analysis
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "institution_cik": "0001364742",
  "institution_name": "BLACKROCK, INC.",
  "period": "3M"
}

###
### Test Institution Moves avec Vanguard
POST {{baseUrlMain}}/ai/institution-moves-analysis
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "institution_cik": "0000102909",
  "institution_name": "VANGUARD GROUP INC",
  "period": "3M"
}

###
### Analyser l'activit√© globale d'un ticker (√Ä ENRICHIR - Phase 1.5/1.6)
### 100% DYNAMIQUE : R√©cup√®re automatiquement Options Flow, Dark Pool, Insiders, Short Interest, Institutional Ownership, News, Events, Quote
### ‚è≥ PROCHAINES AM√âLIORATIONS :
### - Options Flow d√©taill√© (toutes les m√©triques enrichies)
### - Dark Pool Intelligence (patterns, institutions)
### - Insiders d√©taill√© (transactions, patterns, timing)
### - Short Interest Trends (√©volution, FTDs)
### - Signal Consensus Analysis
### - Multi-Scenario Prediction
### - Entry Strategy Recommendations
POST {{baseUrlMain}}/ai/ticker-activity-analysis
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "NVDA"
}

###
### Test Ticker Activity avec AAPL
POST {{baseUrlMain}}/ai/ticker-activity-analysis
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "AAPL"
}

###
### Test Ticker Activity avec TSLA
POST {{baseUrlMain}}/ai/ticker-activity-analysis
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "TSLA"
}

###
### Analyser l'activit√© d'un ticker avec donn√©es personnalis√©es
POST {{baseUrlMain}}/ai/ticker-activity-analysis
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "ticker": "NVDA",
  "data": {
    "options_flow": {
      "total_volume": 5000000,
      "call_put_ratio": 9,
      "unusual": true
    },
    "dark_pool": {
      "total_volume": 10000000,
      "largest_trade": 2000000
    },
    "insiders": {
      "count": 3,
      "net_buy_sell": "buy"
    },
    "short_interest": {
      "short_interest": 50000000,
      "float": 2000000000
    },
    "recent_news": [
      "NVIDIA annonce de nouveaux partenariats",
      "Augmentation des pr√©visions de revenus"
    ],
    "upcoming_events": [
      "Earnings le 15/12",
      "FDA decision le 20/12"
    ]
  }
}

###

# ============================================
# FINANCIAL JUICE - Analyse de Nouvelles avec OpenAI
# ============================================

### POST /ai/financial-juice/analyze - Analyser un headline Financial Juice (Taux d'int√©r√™t)
POST {{baseUrlMain}}/ai/financial-juice/analyze
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "headline": {
    "title": "BREAKING: Fed raises interest rates by 0.25%",
    "description": "Federal Reserve announces rate hike, markets react",
    "timestamp": "2025-12-08T14:30:00Z",
    "category": "Monetary Policy",
    "tickers": []
  }
}

### POST /ai/financial-juice/analyze - Analyser un headline avec ticker (Earnings)
POST {{baseUrlMain}}/ai/financial-juice/analyze
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "headline": {
    "title": "AAPL earnings beat expectations, stock up 5%",
    "description": "Apple reports strong Q4 earnings, beats estimates",
    "timestamp": "2025-12-08T16:00:00Z",
    "category": "Earnings",
    "tickers": ["AAPL"]
  }
}

### POST /ai/financial-juice/analyze - Analyser un headline g√©opolitique (OPEC)
POST {{baseUrlMain}}/ai/financial-juice/analyze
Authorization: Bearer {{accessToken}}
Content-Type: application/json

{
  "headline": {
    "title": "OPEC announces production cut, oil prices surge",
    "description": "OPEC+ agrees to cut production by 2M barrels per day",
    "timestamp": "2025-12-08T10:00:00Z",
    "category": "Commodity",
    "tickers": []
  }
}

### GET /ai/financial-juice/latest - R√©cup√©rer et analyser les derni√®res nouvelles (10 par d√©faut)
GET {{baseUrlMain}}/ai/financial-juice/latest
Authorization: Bearer {{accessToken}}

### GET /ai/financial-juice/latest - R√©cup√©rer et analyser les 20 derni√®res nouvelles
GET {{baseUrlMain}}/ai/financial-juice/latest?limit=20
Authorization: Bearer {{accessToken}}

###

